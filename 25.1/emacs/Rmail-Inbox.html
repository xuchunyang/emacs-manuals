<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- This is the GNU Emacs Manual,
updated for Emacs version 25.1.

Copyright Â© 1985-1987, 1993-2016 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "The GNU Manifesto," "Distribution" and
"GNU GENERAL PUBLIC LICENSE," with the Front-Cover Texts being "A GNU
Manual," and with the Back-Cover Texts as in (a) below.  A copy of the
license is included in the section entitled "GNU Free Documentation
License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom." -->
<!-- Created by GNU Texinfo 6.5, http://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Rmail Inbox (GNU Emacs Manual)</title>

<meta name="description" content="Rmail Inbox (GNU Emacs Manual)">
<meta name="keywords" content="Rmail Inbox (GNU Emacs Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<link href="index.html#Top" rel="start" title="Top">
<link href="Key-Index.html#Key-Index" rel="index" title="Key Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Rmail.html#Rmail" rel="up" title="Rmail">
<link href="Rmail-Files.html#Rmail-Files" rel="next" title="Rmail Files">
<link href="Rmail-Deletion.html#Rmail-Deletion" rel="prev" title="Rmail Deletion">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
blockquote.smallindentedblock {margin-right: 0em; font-size: smaller}
blockquote.smallquotation {font-size: smaller}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
div.smalldisplay {margin-left: 3.2em}
div.smallexample {margin-left: 3.2em}
div.smalllisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: inherit; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: inherit; font-size: smaller}
pre.smalllisp {font-size: smaller}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>
<link rel="stylesheet" type="text/css" href="./manual.css">


</head>

<body lang="en">
<a name="Rmail-Inbox"></a>
<div class="header">
<p>
Next: <a href="Rmail-Files.html#Rmail-Files" accesskey="n" rel="next">Rmail Files</a>, Previous: <a href="Rmail-Deletion.html#Rmail-Deletion" accesskey="p" rel="prev">Rmail Deletion</a>, Up: <a href="Rmail.html#Rmail" accesskey="u" rel="up">Rmail</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Key-Index.html#Key-Index" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<a name="Rmail-Files-and-Inboxes"></a>
<h3 class="section">33.5 Rmail Files and Inboxes</h3>
<a name="index-inbox-file"></a>

<p>When you receive mail locally, the operating system places incoming
mail for you in a file that we call your <em>inbox</em>.  When you start
up Rmail, it runs a C program called <code>movemail</code> to copy the new
messages from your local inbox into your primary Rmail file, which
also contains other messages saved from previous Rmail sessions.  It
is in this file that you actually read the mail with Rmail.  This
operation is called <em>getting new mail</em>.  You can get new mail at
any time in Rmail by typing <kbd>g</kbd>.
</p>
<a name="index-rmail_002dprimary_002dinbox_002dlist"></a>
<a name="index-MAIL-environment-variable"></a>
<p>The variable <code>rmail-primary-inbox-list</code> contains a list of the
files that are inboxes for your primary Rmail file.  If you don&rsquo;t set
this variable explicitly, Rmail uses the <code>MAIL</code> environment
variable, or, as a last resort, a default inbox based on
<code>rmail-spool-directory</code>.  The default inbox file depends on your
operating system; often it is <samp>/var/mail/<var>username</var></samp>,
<samp>/var/spool/mail/<var>username</var></samp>, or
<samp>/usr/spool/mail/<var>username</var></samp>.
</p>
<p>You can specify the inbox file(s) for any Rmail file for the current
session with the command <code>set-rmail-inbox-list</code>; see <a href="Rmail-Files.html#Rmail-Files">Rmail Files</a>.
</p>
<p>There are two reasons for having separate Rmail files and inboxes.
</p>
<ol>
<li> The inbox file format varies between operating systems and according to
the other mail software in use.  Only one part of Rmail needs to know
about the alternatives, and it need only understand how to convert all
of them to Rmail&rsquo;s own format.

</li><li> It is very cumbersome to access an inbox file without danger of losing
mail, because it is necessary to interlock with mail delivery.
Moreover, different operating systems use different interlocking
techniques.  The strategy of moving mail out of the inbox once and for
all into a separate Rmail file avoids the need for interlocking in all
the rest of Rmail, since only Rmail operates on the Rmail file.
</li></ol>

<a name="index-Babyl-files"></a>
<a name="index-mbox-files"></a>
<p>Rmail was originally written to use the Babyl format as its internal
format.  Since then, we have recognized that the usual inbox format
(&lsquo;<samp>mbox</samp>&rsquo;) on Unix and GNU systems is adequate for the job, and so
since Emacs 23 Rmail uses that as its internal format.  The Rmail file
is still separate from the inbox file, even though their format is the
same.
<a name="index-rmail_002dmbox_002dformat"></a>
(In fact, there are a few slightly different mbox formats.
The differences are not very important, but you can set the variable
<code>rmail-mbox-format</code> to tell Rmail which form your system uses.
See that variable&rsquo;s documentation for more details.)
</p>
<a name="index-rmail_002dpreserve_002dinbox"></a>
<p>When getting new mail, Rmail first copies the new mail from the
inbox file to the Rmail file; then it saves the Rmail file; then it
clears out the inbox file.  This way, a system crash may cause
duplication of mail between the inbox and the Rmail file, but cannot
lose mail.  If <code>rmail-preserve-inbox</code> is non-<code>nil</code>, then
Rmail does not clear out the inbox file when it gets new mail.  You
may wish to set this, for example, on a portable computer you use to
check your mail via POP while traveling, so that your mail will remain
on the server and you can save it later on your workstation.
</p>
<p>In some cases, Rmail copies the new mail from the inbox file
indirectly.  First it runs the <code>movemail</code> program to move the mail
from the inbox to an intermediate file called
<samp>.newmail-<var>inboxname</var></samp>, in the same directory as the Rmail
file.  Then Rmail merges the new mail from that file, saves the Rmail
file, and only then deletes the intermediate file.  If there is a crash
at the wrong time, this file continues to exist, and Rmail will use it
again the next time it gets new mail from that inbox.
</p>
<p>If Rmail is unable to convert the data in
<samp>.newmail-<var>inboxname</var></samp> into mbox format, it renames the file to
<samp>RMAILOSE.<var>n</var></samp> (<var>n</var> is an integer chosen to make the name
unique) so that Rmail will not have trouble with the data again.  You
should look at the file, find whatever message confuses Rmail (probably
one that includes the control-underscore character, octal code 037), and
delete it.  Then you can use <kbd>1 g</kbd> to get new mail from the
corrected file.
</p>
<hr>
<div class="header">
<p>
Next: <a href="Rmail-Files.html#Rmail-Files" accesskey="n" rel="next">Rmail Files</a>, Previous: <a href="Rmail-Deletion.html#Rmail-Deletion" accesskey="p" rel="prev">Rmail Deletion</a>, Up: <a href="Rmail.html#Rmail" accesskey="u" rel="up">Rmail</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Key-Index.html#Key-Index" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
