<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- This is the GNU Emacs Manual,
updated for Emacs version 25.3.

Copyright Â© 1985-1987, 1993-2017 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "The GNU Manifesto," "Distribution" and
"GNU GENERAL PUBLIC LICENSE," with the Front-Cover Texts being "A GNU
Manual," and with the Back-Cover Texts as in (a) below.  A copy of the
license is included in the section entitled "GNU Free Documentation
License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom." -->
<!-- Created by GNU Texinfo 6.5, http://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Sending Patches (GNU Emacs Manual)</title>

<meta name="description" content="Sending Patches (GNU Emacs Manual)">
<meta name="keywords" content="Sending Patches (GNU Emacs Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<link href="index.html#Top" rel="start" title="Top">
<link href="Key-Index.html#Key-Index" rel="index" title="Key Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Bugs.html#Bugs" rel="up" title="Bugs">
<link href="Contributing.html#Contributing" rel="next" title="Contributing">
<link href="Checklist.html#Checklist" rel="prev" title="Checklist">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
blockquote.smallindentedblock {margin-right: 0em; font-size: smaller}
blockquote.smallquotation {font-size: smaller}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
div.smalldisplay {margin-left: 3.2em}
div.smallexample {margin-left: 3.2em}
div.smalllisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: inherit; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: inherit; font-size: smaller}
pre.smalllisp {font-size: smaller}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>
<link rel="stylesheet" type="text/css" href="./manual.css">


</head>

<body lang="en">
<a name="Sending-Patches"></a>
<div class="header">
<p>
Previous: <a href="Checklist.html#Checklist" accesskey="p" rel="prev">Checklist</a>, Up: <a href="Bugs.html#Bugs" accesskey="u" rel="up">Bugs</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Key-Index.html#Key-Index" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<a name="Sending-Patches-for-GNU-Emacs"></a>
<h3 class="section">54.5 Sending Patches for GNU Emacs</h3>

<a name="index-sending-patches-for-GNU-Emacs"></a>
<a name="index-patches_002c-sending"></a>
<p>If you would like to write bug fixes or improvements for GNU Emacs,
that is very helpful.  When you send your changes, please follow these
guidelines to make it easy for the maintainers to use them.  If you
don&rsquo;t follow these guidelines, your information might still be useful,
but using it will take extra work.  Maintaining GNU Emacs is a lot of
work in the best of circumstances, and we can&rsquo;t keep up unless you do
your best to help.
</p>
<p>Every patch must have several pieces of information before we
can properly evaluate it.
</p>
<p>When you have all these pieces, bundle them up in a mail message and
send it to the developers.  Sending it to
<a href="mailto:bug-gnu-emacs@gnu.org">bug-gnu-emacs@gnu.org</a> (which is the bug/feature list) is
recommended, because that list is coupled to a tracking system that
makes it easier to locate patches.  If your patch is not complete and
you think it needs more discussion, you might want to send it to
<a href="mailto:emacs-devel@gnu.org">emacs-devel@gnu.org</a> instead.  If you revise your patch,
send it as a followup to the initial topic.
</p>
<p>We prefer to get the patches as plain text, either inline (be careful
your mail client does not change line breaks) or as MIME attachments.
</p>
<ul>
<li> Include an explanation with your changes of what problem they fix or what
improvement they bring about.

<ul>
<li> For a fix for an existing bug, it is
best to reply to the relevant discussion on the &lsquo;<samp>bug-gnu-emacs</samp>&rsquo;
list, or the bug entry in the GNU Bug Tracker at
<a href="http://debbugs.gnu.org">http://debbugs.gnu.org</a>.  Explain why your change fixes the bug.

</li><li> For a new feature, include a description of the feature and your
implementation.

</li><li> For a new bug, include a proper bug report for the problem you think
you have fixed.  We need to convince ourselves that the change is
right before installing it.  Even if it is correct, we might have
trouble understanding it if we don&rsquo;t have a way to reproduce the
problem.
</li></ul>

</li><li> Include all the comments that are appropriate to help people reading the
source in the future understand why this change was needed.

</li><li> Don&rsquo;t mix together changes made for different reasons.
Send them <em>individually</em>.

<p>If you make two changes for separate reasons, then we might not want to
install them both.  We might want to install just one.  If you send them
all jumbled together in a single set of diffs, we have to do extra work
to disentangle them&mdash;to figure out which parts of the change serve
which purpose.  If we don&rsquo;t have time for this, we might have to ignore
your changes entirely.
</p>
<p>If you send each change as soon as you have written it, with its own
explanation, then two changes never get tangled up, and we can consider
each one properly without any extra work to disentangle them.
</p>
</li><li> Send each change as soon as that change is finished.  Sometimes people
think they are helping us by accumulating many changes to send them all
together.  As explained above, this is absolutely the worst thing you
could do.

<p>Since you should send each change separately, you might as well send it
right away.  That gives us the option of installing it immediately if it
is important.
</p>
</li><li> The patch itself.

<p>Use &lsquo;<samp>diff -u</samp>&rsquo; to make your diffs.  Diffs without context are hard
to install reliably.  More than that, they are hard to study; we must
always study a patch to decide whether we want to install it.  Context
format is better than contextless diffs, but we prefer the unified
format.
</p>
<p>If you have GNU diff, use &lsquo;<samp>diff -u -F'^[_a-zA-Z0-9$]\+ *('</samp>&rsquo; when
making diffs of C code.  This shows the name of the function that each
change occurs in.
</p>
<p>If you are using the Emacs repository, make sure your copy is
up-to-date (e.g., with <code>git pull</code>).  You can commit your changes
to a private branch and generate a patch from the master version by
using <code>git format-patch master</code>. Or you can leave your changes
uncommitted and use <code>git diff</code>.
</p>
</li><li> Avoid any ambiguity as to which is the old version and which is the new.
Please make the old version the first argument to diff, and the new
version the second argument.  And please give one version or the other a
name that indicates whether it is the old version or your new changed
one.

</li><li> Write the change log entries for your changes.  This is both to save us
the extra work of writing them, and to help explain your changes so we
can understand them.

<p>The purpose of the change log is to show people where to find what was
changed.  So you need to be specific about what functions you changed;
in large functions, it&rsquo;s often helpful to indicate where within the
function the change was.
</p>
<p>On the other hand, once you have shown people where to find the change,
you need not explain its purpose in the change log.  Thus, if you add a
new function, all you need to say about it is that it is new.  If you
feel that the purpose needs explaining, it probably does&mdash;but put the
explanation in comments in the code.  It will be more useful there.
</p>
<p>Please look at the change log entries of recent commits to see what
sorts of information to put in, and to learn the style that we use.  Note that,
unlike some other projects, we do require change logs for
documentation, i.e., Texinfo files.
See <a href="Change-Log.html#Change-Log">Change Log</a>,
See <a href="http://www.gnu.org/prep/standards/html_node/Change-Log-Concepts.html#Change-Log-Concepts">Change Log Concepts</a> in <cite>GNU Coding Standards</cite>.
</p>
</li><li> When you write the fix, keep in mind that we can&rsquo;t install a change that
would break other systems.  Please think about what effect your change
will have if compiled on another type of system.

<p>Sometimes people send fixes that <em>might</em> be an improvement in
general&mdash;but it is hard to be sure of this.  It&rsquo;s hard to install
such changes because we have to study them very carefully.  Of course,
a good explanation of the reasoning by which you concluded the change
was correct can help convince us.
</p>
<p>The safest changes are changes to the configuration files for a
particular machine.  These are safe because they can&rsquo;t create new bugs
on other machines.
</p>
<p>Please help us keep up with the workload by designing the patch in a
form that is clearly safe to install.
</p></li></ul>

<hr>
<div class="header">
<p>
Previous: <a href="Checklist.html#Checklist" accesskey="p" rel="prev">Checklist</a>, Up: <a href="Bugs.html#Bugs" accesskey="u" rel="up">Bugs</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Key-Index.html#Key-Index" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
